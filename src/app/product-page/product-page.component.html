<div class="container">
  <h2>Products</h2>

  <!-- Search -->
  <input type="text" [(ngModel)]="searchTerm" (input)="filterProducts()" id="searchBox" placeholder="Search">

  <!-- Category -->
  <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
    <option value="">All</option>
    <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
  </select>

  <!-- Price Range -->
  <span>100</span>
  <input type="range" min="100" max="1000" [step]="50"
    [(ngModel)]="selectedPrice" (input)="filterProducts()" id="rangeBox">
  <span>1000</span>

  <!-- Products Grid -->
  <div class="products">
    <div class="product-card" *ngFor="let product of paginatedProducts">
      <img [src]="product.image" alt="">
      <p><a [routerLink]="['/product', product.id]">{{ product.name }}</a></p>
      <p>${{ product.price }}</p>
      <button (click)="addToCart(product)" [ngClass]="product.isInStock ? 'in-stock' : 'out-of-stock'">
        Add to Cart
      </button>
    </div>
  </div>

  <!-- Pagination Controls -->
  <div class="pagination-controls">
    <!-- Page Size Dropdown -->
    <label>Items per page:</label>
    <select (change)="changePageSize($event)">
      <option *ngFor="let size of [2,4,6,8,10]" [value]="size" [selected]="size===itemPerPage">
        {{ size }}
      </option>
    </select>

    <!-- Page Number Buttons -->
    <div class="page-buttons">
      <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">Prev</button>

      <button *ngFor="let page of [].constructor(totalPages); let i = index"
              (click)="changePage(i + 1)"
              [class.active]="currentPage === i + 1">
        {{ i + 1 }}
      </button>

      <button (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
    </div>
  </div>
</div>
